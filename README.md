# DanmakuReader

--------

**本项目有如下功能及特点：**

* **读取弹幕本直播间有粉丝牌的粉丝弹幕**


* **设置屏蔽词（完全匹配）**


* 参照b站up资深小狐狸直播时的需要设计
  * 自动追赶机制：帮助你直击最新弹幕（PUSH4 发布后）
  * 绝对的排外政策：可调节读取所需要的牌子等级（默认1级），只要不是自己直播间的牌子多少级都不读（PUSH4 发布后）
  * 没有阀门制度：跳过弹幕时不看等级，一视同仁（PUSH5 发布后）
  * 预设屏蔽词：符合狐宝直播需要，包含 。/ 赞 / ？ 和所有个位数字（PUSH5 发布后）


* 节省api调用的运行机制
  * 当消息仅包含中英文常用符号时，拒绝加入消息队列（PUSH5发布后）
  * 自动储存字符长度3以下的字符串（PUSH5发布后）


* 测试：
  * PUSH4更新后：
    * 主播直播博德之门3（2023.8.21 约4h）约消耗1.3k次；
    * 直播欧陆风云4（2023.8.23 19-20点）1.3k次调用（基本就是最大每小时使用量了），截至22：35分调用4.5k次


* 语音目前基于百度语音合成api，需要配置api


* 有什么更好用的api欢迎给我说，我测试后会狠狠的上新


* 注意：python版经过作者更详细的测试，会更加稳定；release版是pyinstaller打包完成的，只测试了可运行性


* 打开项目后，可在对应直播间依次输入以下内容进行测试（注意直播间粉丝牌等级，没有粉丝牌或等级不足会拒绝加入队列）：
  * 好好好 > reader界面应出现：audio/365d167f44e1d0937ddcf4d3d3724fd0.mp3
  * 好好好 > 本次好好好不会调用api也不会读出来，因为相邻弹幕一致会拒绝读取
  * 。。。 > reader界面应出现：检测到。。。中仅包含符号，拒绝加入队列
  * 好好好 > reader界面应出现：audiosave/365d167f44e1d0937ddcf4d3d3724fd0.mp3
  * 赞 > 本次赞因为在屏蔽词中，所以不会加入队列也不会读出来
  * 狐宝新婚快乐 > reader界面应出现：audio/b3d9dc5e27b37f928531c488a7f1093f.mp3
  * 以上测试全部通过后，即可说明程序基本功能正常运行，如果有任何错误，请联系作者。
  * 错误信息可以如下形式保留：
    * 1,在项目文件夹右键打开cmd/windows terminal
    * 2,在cmd中，python请运行python main.py / release运行main.exe
    * 3,配置完成后，在主界面输入b启动程序，并关闭自动打开的reader界面
    * 4,以打开main同样的方式打开reader.py / reader.exe
    * 5,复现错误并将错误信息发送给作者，我会十分感谢您的错误报告

****
**使用方法：**
* py文件
  * 直接运行main.py即可根据提示操作
* release
  * 你需要下载main.exe 与 reader.exe，并放入同一个文件夹
  * 直接运行main.exe即可根据提示操作
* API配置
  * 第一次运行程序会自动初始化，你需要在百度语音合成项目里创建自己的工程文件
  * https://ai.baidu.com/tech/speech/tts?track=b6d7c141cb9ed59bcbbc91553767924a67ea39bae9988258
  * 注册后，领取‘短文本在线合成’项目（个人认证后，需要实名认证（**请自行辨别**），有5w次体验调用次数），并创建你的应用
  * ![image](https://github.com/MeowDWing/DanmakuReader/assets/67000868/3301f9d0-4e56-4149-ac74-a15543322b9f)
  * 之后，将对应的APIkey与secretkey复制到./files/settings.txt的预留位置即可
